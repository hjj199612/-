<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
<link
	href="/css/main_16f99127.css"
	rel="stylesheet">

<title>校园统计人员</title>
</head><h1>学校统计人员界面</h1>
<body>
	<br>
	<div class="settings-header">
		<div class="settings-header-title">个人信息设置</div>
		<ul class="settings-header-tab">
			<li><a href="/schoolman/PersonalInformationLoad"><span
					class="menu-item menu-item-active">个人信息</span></a><span class="divider"></span></li>
			<li><a href="/schoolman/IdentityLoad"><span class="menu-item">身份认证</span></a><span
				class="divider"></span></li>
			<li><a href=""><span class="menu-item">毕业生就业状况</span></a><span
				class="divider"></span></li>
		</ul>
	</div>
	<div>
		<form class="account-form form" action="/schoolman/updatePersonalInformation" method="post" enctype="multipart/form-data">
			<div class="form-item">
				<div class="form-item-label">
					<label class="">头像</label>
				</div>
				<div class="form-item-control ">
					<div class="avatar-area fl" id="prvid">
						<img  alt="头像" class="avatar" 
						th:if="${session.schoolman.getHeadpic()==null}" src="/userFile/schoolmen/def.png">
						<img  alt="头像" class="avatar" 
						th:if="${session.schoolman.getHeadpic()!=null}" th:src="${session.schoolman.getHeadpic()}">
					</div>
					
					<div class="upload-img-des fl">
						<p>支持jpg、jpeg、gif、png图片文件</p>
						<p>图片尺寸：120px*120px</p>
						<p>图片大小需小于10MB</p>
					
					</div>
					<input type="file" id="files" name="headpic" onchange="previewImage(this, 'prvid')" multiple="multiple">
				</div>
			</div>
			
			<div class="form-item form-item-tips info-name dot">
				<div class="form-item-label">
					<label for="name" class="">姓名</label>
				</div>
				<div class="form-item-control success">
					<div class="input-wrapper">
						<input type="text" placeholder="请填写你的常用名" name="name"
							th:value="${session.schoolman.getName()}" required="required"
							data-meta="[object Object]" class="input" th:if="${session.schoolman.getYesorno()!='yes'}">
							<input type="text"  th:value="${session.schoolman.getName()}" readonly="readonly"
							data-meta="[object Object]" class="input" th:if="${session.schoolman.getYesorno()=='yes'}">
					</div>
					<div class="input-tips hrName"><span th:text="${message2}"></span></div>
				</div>
			</div>
			<div class="form-item form-item-tips info-title dot">
				<div class="form-item-label">
					<label for="hrName4JD" class="">学校</label>
				</div>
				<div class="form-item-control success">
					<div class="input-wrapper">
						<input type="text" placeholder="请填写你负责的学校" name="school" th:if="${session.schoolman.getYesorno()!='yes'}"
							th:value="${session.schoolman.getSchool()}" required="required"
							data-meta="[object Object]" class="input">
							<input type="text"  th:value="${session.schoolman.getSchool()}" readonly="readonly"
							data-meta="[object Object]" class="input" th:if="${session.schoolman.getYesorno()=='yes'}">
					</div>
					<div class="input-tips hrName"><span th:text="${message3}"></span>*成功保存后不可更改</div>
				</div>
			</div>
			<div class="form-item form-item-tips info-job">
				<div class="form-item-label">
					<label for="title" class="">职位</label>
				</div>
				<div class="form-item-control success">
					<div class="input-wrapper">
						<input type="text" placeholder="请填写你的职位" name="identity" th:value="${session.schoolman.getIdentity()}"
							data-meta="[object Object]" class="input" required="required" th:if="${session.schoolman.getYesorno()!='yes'}">
				<input type="text"  th:value="${session.schoolman.getIdentity()}" readonly="readonly"
							data-meta="[object Object]" class="input" th:if="${session.schoolman.getYesorno()=='yes'}">
					</div>
					<div class="input-tips hrName"><span th:text="${message4}"></span></div>
				</div>
			</div>
			<button class="btn btn btn-submit" type="submit" th:if="${session.schoolman.getYesorno()!='yes'}">保存</button>
			<div class="footer-menu clearfix">
				<a href="/schoolman/UpdatePassword"><span class="reset-pwd">修改密码
				<span class="mds-setting-quot"></span>
				</span></a>
			</div>
		</form>
	</div>
	<script>
		function previewImage(file, prvid) { 
		/* file：file控件 
		* prvid: 图片预览容器 
		*/ 
		var tip = "Expect jpg or png or gif!"; // 设定提示信息 
		var filters = { 
		"jpeg" : "/9j/4", 
		"gif" : "R0lGOD", 
		"png" : "iVBORw" 
		} 
		var prvbox = document.getElementById(prvid); 
		prvbox.innerHTML = ""; 
		if (window.FileReader) { // html5方案 
		for (var i=0, f; f = file.files[i]; i++) { 
		var fr = new FileReader(); 
		fr.onload = function(e) { 
		var src = e.target.result; 
		if (!validateImg(src)) { 
		alert(tip) 
		} else { 
		showPrvImg(src); 
		} 
		} 
		fr.readAsDataURL(f); 
		} 
		} else { // 降级处理

		if ( !/\.jpg$|\.png$|\.gif$/i.test(file.value) ) { 
		alert(tip); 
		} else { 
		showPrvImg(file.value); 
		} 
		} 

		function validateImg(data) { 
		var pos = data.indexOf(",") + 1; 
		for (var e in filters) { 
		if (data.indexOf(filters[e]) === pos) { 
		return e; 
		} 
		} 
		return null; 
		} 

		function showPrvImg(src) { 
		var img = document.createElement("img"); 
		img.alt='头像';
		img.className = 'avatar';
		img.src = src; 
		prvbox.appendChild(img); 
		} 
		}
		</script>
	<br>
</body>
</html>